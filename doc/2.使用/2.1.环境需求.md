# **环境需求**

* 目前只支持在Linux（各种Linux发行版）和Darwin（如MacOS）平台进行编译
    * 主要一个技术原因是目前的编译器对于个别语法和功能的实现依赖fork系统调用，在不支持fork的操作系统下使用会出错，例如在Windows下就不能直接用，
    可以装个Linux虚拟机来使用Larva
        * *Note*：后续如果有必要，可以想办法去掉对fork的依赖，进而支持Windows，但这个工作改动太大而且麻烦，不仅仅是fork的问题，就先无限期推迟了

    * 在其他\*nix平台编译Larva程序会生成目标Golang代码，但是编译可执行程序文件的步骤会报平台不支持，就目前的实现来说，
    理论上也可以直接支持Unix等类似平台的，只是我手头上没有那么多平台去一一测试，暂时在编译器写死了只识别Linux和Darwin

    * *Note*：我的开发是在MacOS或CentOS下，开发时会尽量避免发行版之间的差别
    （实际上由于Python和Golang都是跨平台做的较好的语言，很少会有差别的地方）

* 编译器采用Python2编写，推荐采用python2.7.x执行
    * 目前我是在CentOS环境开发，用的2.6.6，所以用2.7.x运行应该都没有问题

* 目标代码输出为Golang代码，推荐安装go的最新稳定版
    * 目前我的Larva开发环境对应的Golang版本是1.13.4

    <br>

    * *Note*：编译器在生成Golang代码后会立即调用go build构建可执行程序文件，但目标代码依然会保留下来，
    然而请不要在生成Golang代码后将其拷贝至另外的环境手动进行编译，因为版本、库环境都可能有不同，而且需要自己构建环境变量、build指令等，
    容易出问题
    * *Note*：在语言本身的开发过程中我也会更新Larva对应的Golang版本，虽然不会太激进，但也可能用到较新的Golang标准库，
    如果你在编译过程的`go build`阶段出现Golang库接口找不到之类的错误，则可能是版本比较老的缘故

* Larva支持在代码中直接导入git站点的项目下的模块，编译器需要调用git命令，需要已安装好git工具，建议安装最新稳定版
    * 目前我的Larva开发环境下的git版本是2.23.0

* 需要保证必要的工作目录的存在，并遵循规范：
    * 安装目录

        * 即git clone或其他方式安装Larva后的目录，例如`~/larva-lang`
        * 为方便起见，后面的文档默认安装目录都是`~/larva-lang`，并用其来做文档说明

    * 用户库目录

        * 默认是在Larva安装目录下的ulib目录，且编译器会自动创建
        * 如需修改，可通过环境变量`LARVA_USR_LIB_DIR`指定
        * 为方便起见，后续文档说明均采用默认目录`~/larva-lang/ulib`

    * 临时工作目录

        * 默认是在Larva安装目录下的tmp目录，且编译器会自动创建
        * 如需修改，可通过环境变量`LARVA_TMP_DIR`指定
        * 为方便起见，后续文档说明均采用默认目录`~/larva-lang/tmp`

    * 标准库目录、用户库目录和临时工作目录两两之间不能相同或为包含关系

    * *Note*：这些目录的具体含义说明见‘2.2.程序结构’和‘2.3.编译执行’

* 具体到Larva的程序组成，有一些对库目录、模块名的限制，具体说明放在‘2.2.程序结构’
